<span *ngIf="stacked !== undefined && stacked.length>0" #containerRef>

    <h3>Exercise energy (kcal)</h3>
     <app-summary-graph  [dayActivity]="activity" [zoneHR]="zoneHR"></app-summary-graph>
    <table>
        <tr *ngFor="let pie of stacked | reverse">

                <td>Week {{pie.name}}</td>
                <td>
                    <ngx-charts-advanced-pie-chart
                            [view]="[containerRef.offsetWidth, 200]"
                            [scheme]="colorStacked"
                            label="Exercise energy (kcal) - Heart Rate Zone (Average for Activity)"
                            [results]="pie.series"
                            [gradient]="gradient"
                            (select)="onSelect($event)"
                            [animations]="false"
                    >
                    </ngx-charts-advanced-pie-chart>
                </td>
           </tr>
        </table>


    <h3>Heart Rate</h3>
    <table>
       <tr *ngFor="let pie of stacked | reverse">
            <td>Week {{pie.name}}</td>
            <td>
                <span *ngIf="pie.hr !== undefined">
                     <ngx-charts-advanced-pie-chart
                             [view]="[containerRef.offsetWidth, 200]"
                             [scheme]="colorStacked"
                             label="Exercise duration (min) - Heart Rate Zone"
                             [results]="pie.hr"
                             [gradient]="gradient"
                             (select)="onSelect($event)"
                             [animations]="false"
                     >
                    </ngx-charts-advanced-pie-chart>
                </span>
            </td>
       </tr>
        </table>
<app-summary-graph  [dayActivity]="activity" [zoneHR]="zoneHR" type="heart"></app-summary-graph>
    <h3>Power</h3>
    <table>
       <tr *ngFor="let pie of stacked | reverse">
            <td>Week {{pie.name}}</td>
            <td>
            <span *ngIf="pie.pwr !== undefined">
             <ngx-charts-advanced-pie-chart
                     [view]="[containerRef.offsetWidth, 200]"
                     [scheme]="colorFTP"
                     label="Exercise duration (min) - Power Zone"
                     [results]="pie.pwr"
                     [gradient]="gradient"
                     (select)="onSelect($event)"
                     [animations]="false"
             >
            </ngx-charts-advanced-pie-chart>
                </span>
           </td>
       </tr>
    </table>
    <app-summary-graph  [dayActivity]="activity" [zoneHR]="zoneHR" type="power"></app-summary-graph>
</span>
<!--
<h4>Daily Average (per week)</h4>
<ngx-charts-bar-vertical *ngIf="single!==undefined"
                                 [view]="viewSingle"
                                 [scheme]="colorSingle"
                                 [results]="single"
                                 [gradient]="gradient"
                                 [xAxis]="showXAxis"
                                 [yAxis]="showYAxis"
                                 [legend]="showLegend"
                                 [showXAxisLabel]="showXAxisLabel"
                                 [showYAxisLabel]="showYAxisLabel"
                                 [xAxisLabel]="xAxisLabel"
                                 [yAxisLabel]="yAxisLabel"
                                 (select)="onSelect($event)"
                                 [animations]="false"
                                 (window:resize)="onResize($event)">
    <ng-template #tooltipTemplate let-model="model">
          <span *ngFor="let pizza of pizza(model.value)">
                                      <span class="material-symbols-outlined">local_pizza</span>
                                 </span>
        <span class="material-symbols-outlined">local_pizza</span>
        {{model.value}} kcal
        <br/>
        <span class="material-symbols-outlined">timer</span> {{duration(model.extra.wk.duration/(7*60))}} per day
    </ng-template>
</ngx-charts-bar-vertical>
<h4>Weekly Totals</h4>
<ngx-charts-bar-vertical-stacked *ngIf="stacked!==undefined"
                                 [view]="viewStacked"
                                 [scheme]="colorStacked"
                                 [results]="stacked"
                                 [gradient]="gradient"
                                 [xAxis]="showXAxis"
                                 [yAxis]="showYAxis"
                                 [legend]="showLegend"
                                 [showXAxisLabel]="showXAxisLabel"
                                 [showYAxisLabel]="showYAxisLabel"
                                 [xAxisLabel]="xAxisLabel"
                                 [yAxisLabel]="yAxisLabel"
                                 (select)="onSelect($event)"
                                 [animations]="false"
                                 (window:resize)="onResize($event)">
    <ng-template #tooltipTemplate let-model="model">
        <b>Heart Rate Zone {{model.name}}</b>
        <br/>
        <br/>
          <span *ngFor="let pizza of pizza(model.value)">
                                      <span class="material-symbols-outlined">local_pizza</span>
                                 </span>
        <span class="material-symbols-outlined">local_pizza</span>
        {{model.value}} kcal
        <br/>
        <span class="material-symbols-outlined">timer</span> {{duration(model.extra.wk.duration/60)}}
        <br/>
        Activities {{model.extra.wk.num_activities}}
    </ng-template>
</ngx-charts-bar-vertical-stacked>
-->
